<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Maui.Assignment1.Views.PatientView"
             NavigatedTo="ContentPage_NavigatedTo">

    <ScrollView>
        <VerticalStackLayout
            Padding="30,0"
            Spacing="25">

            <Label 
                Text="Patient Details"
                SemanticProperties.HeadingLevel="Level1"
                FontSize="32"
                HorizontalOptions="Center" />

            <!-- Patient Information Section -->
            <Frame BorderColor="Gray" CornerRadius="5" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Patient Information" FontSize="20" FontAttributes="Bold"/>
                    
                    <Label Text="Name:"/>
                    <Entry x:Name="NameEntry" 
                           Text="{Binding Name}" 
                           Placeholder="Enter patient name"/>

                    <Label Text="Address:"/>
                    <Entry x:Name="AddressEntry" 
                           Text="{Binding Address}" 
                           Placeholder="Enter address"/>

                    <Label Text="Birthdate:"/>
                    <Entry x:Name="BirthdateEntry" 
                           Text="{Binding Birthdate}" 
                           Placeholder="MM/DD/YYYY"/>

                    <Label Text="Race:"/>
                    <Entry x:Name="RaceEntry" 
                           Text="{Binding Race}" 
                           Placeholder="Enter race"/>

                    <Label Text="Gender:"/>
                    <Entry x:Name="GenderEntry" 
                           Text="{Binding Gender}" 
                           Placeholder="Enter gender"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Medical Notes Section -->
            <Frame BorderColor="Gray" CornerRadius="5" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Medical Notes" FontSize="20" FontAttributes="Bold"/>
                    
                    <Label Text="Add New Note"/>
                    
                    <Label Text="Date:"/>
                    <DatePicker x:Name="NoteDatePicker"/>

                    <Label Text="Diagnosis:"/>
                    <Editor x:Name="DiagnosisEditor" 
                            Placeholder="Enter diagnosis"
                            HeightRequest="80"/>

                    <Label Text="Prescription:"/>
                    <Editor x:Name="PrescriptionEditor" 
                            Placeholder="Enter prescription"
                            HeightRequest="80"/>

                    <Button Text="Add Medical Note" 
                            Clicked="AddMedicalNoteClicked"/>

                    <!-- Display Existing Medical Notes -->
                    <Label Text="Existing Notes:" FontAttributes="Bold" Margin="0,10,0,0"/>
                    <CollectionView x:Name="MedicalNotesList" 
                                    ItemsSource="{Binding MedicalNotes}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame Margin="5" 
                                       Padding="10" 
                                       BorderColor="LightBlue"
                                       CornerRadius="5">
                                    <VerticalStackLayout Spacing="5">
                                        <Label Text="{Binding Date, StringFormat='Date: {0:MM/dd/yyyy}'}" 
                                               FontSize="14" 
                                               FontAttributes="Bold"/>
                                        <Label Text="{Binding Diagnosis, StringFormat='Diagnosis: {0}'}" 
                                               FontSize="14"/>
                                        <Label Text="{Binding Prescription, StringFormat='Prescription: {0}'}" 
                                               FontSize="14"/>
                                    </VerticalStackLayout>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons -->
            <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
                <Button Text="Save" 
                        Clicked="OkClicked"
                        WidthRequest="100"/>
                <Button Text="Cancel" 
                        Clicked="CancelClicked"
                        WidthRequest="100"/>
            </HorizontalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
